var v={exports:{}},f={},g;function $(){if(g)return f;g=1;function b(r){for(var t=r.length,e=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],i=0,n=0;t--;)n+=e[i][parseInt(r.charAt(t),10)],i=1-i;return n%10===0&&n>0}function E(r){for(var t=r.length,e=5,i=0;i<t;i++)e=((e||10)*2%11+parseInt(r.charAt(i),10))%10;return e===1}function V(r,t){t===void 0&&(t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");for(var e=r.length,i=t.length,n=Math.floor(i/2),s=0;s<e;s++)n=((n||i)*2%(i+1)+t.indexOf(r.charAt(s)))%i;return n===1}function P(r){return r.split("").map(function(t){var e=t.charCodeAt(0);return e>=65&&e<=90?e-55:t}).join("").split("").map(function(t){return parseInt(t,10)})}function x(r){for(var t=P(r),e=0,i=t.length,n=0;n<i-1;++n)e=(e+t[n])*10%97;return e+=t[i-1],e%97===1}function A(r){for(var t=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],e=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],i=r.reverse(),n=0,s=0;s<i.length;s++)n=t[n][e[s%8][i[s]]];return n===0}var w={luhn:b,mod11And10:E,mod37And36:V,mod97And10:x,verhoeff:A};function O(r,t,e){if(arguments.length===2)for(var i=0,n=t.length,s;i<n;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return r.concat(s||Array.prototype.slice.call(t))}function k(r,t,e,i){var n=(e.getAttribute("type")||"").toLowerCase(),s=e.tagName.toLowerCase();if(s==="textarea")return e.value;if(s==="select"){var a=e,o=a.selectedIndex;return o>=0?a.options.item(o).value:""}if(s==="input")if(n==="radio"||n==="checkbox"){var u=i.filter(function(l){return l.checked}).length;return u===0?"":u+""}else return e.value;return""}function I(){return{fns:{},clear:function(){this.fns={}},emit:function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];(this.fns[r]||[]).map(function(i){return i.apply(i,t)})},off:function(r,t){if(this.fns[r]){var e=this.fns[r].indexOf(t);e>=0&&this.fns[r].splice(e,1)}},on:function(r,t){(this.fns[r]=this.fns[r]||[]).push(t)}}}function F(){return{filters:{},add:function(r,t){(this.filters[r]=this.filters[r]||[]).push(t)},clear:function(){this.filters={}},execute:function(r,t,e){if(!this.filters[r]||!this.filters[r].length)return t;for(var i=t,n=this.filters[r],s=n.length,a=0;a<s;a++)i=n[a].apply(i,e);return i},remove:function(r,t){this.filters[r]&&(this.filters[r]=this.filters[r].filter(function(e){return e!==t}))}}}var L=function(){function r(t,e){this.fields={},this.elements={},this.ee=I(),this.filter=F(),this.plugins={},this.results=new Map,this.validators={},this.form=t,this.fields=e}return r.prototype.on=function(t,e){return this.ee.on(t,e),this},r.prototype.off=function(t,e){return this.ee.off(t,e),this},r.prototype.emit=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return(e=this.ee).emit.apply(e,O([t],i,!1)),this},r.prototype.registerPlugin=function(t,e){if(this.plugins[t])throw new Error("The plguin ".concat(t," is registered"));return e.setCore(this),e.install(),this.plugins[t]=e,this},r.prototype.deregisterPlugin=function(t){var e=this.plugins[t];return e&&e.uninstall(),delete this.plugins[t],this},r.prototype.enablePlugin=function(t){var e=this.plugins[t];return e&&e.enable(),this},r.prototype.disablePlugin=function(t){var e=this.plugins[t];return e&&e.disable(),this},r.prototype.isPluginEnabled=function(t){var e=this.plugins[t];return e?e.isPluginEnabled():!1},r.prototype.registerValidator=function(t,e){if(this.validators[t])throw new Error("The validator ".concat(t," is registered"));return this.validators[t]=e,this},r.prototype.registerFilter=function(t,e){return this.filter.add(t,e),this},r.prototype.deregisterFilter=function(t,e){return this.filter.remove(t,e),this},r.prototype.executeFilter=function(t,e,i){return this.filter.execute(t,e,i)},r.prototype.addField=function(t,e){var i=Object.assign({},{selector:"",validators:{}},e);return this.fields[t]=this.fields[t]?{selector:i.selector||this.fields[t].selector,validators:Object.assign({},this.fields[t].validators,i.validators)}:i,this.elements[t]=this.queryElements(t),this.emit("core.field.added",{elements:this.elements[t],field:t,options:this.fields[t]}),this},r.prototype.removeField=function(t){if(!this.fields[t])throw new Error("The field ".concat(t," validators are not defined. Please ensure the field is added first"));var e=this.elements[t],i=this.fields[t];return delete this.elements[t],delete this.fields[t],this.emit("core.field.removed",{elements:e,field:t,options:i}),this},r.prototype.validate=function(){var t=this;return this.emit("core.form.validating",{formValidation:this}),this.filter.execute("validate-pre",Promise.resolve(),[]).then(function(){return Promise.all(Object.keys(t.fields).map(function(e){return t.validateField(e)})).then(function(e){switch(!0){case e.indexOf("Invalid")!==-1:return t.emit("core.form.invalid",{formValidation:t}),Promise.resolve("Invalid");case e.indexOf("NotValidated")!==-1:return t.emit("core.form.notvalidated",{formValidation:t}),Promise.resolve("NotValidated");default:return t.emit("core.form.valid",{formValidation:t}),Promise.resolve("Valid")}})})},r.prototype.validateField=function(t){var e=this,i=this.results.get(t);if(i==="Valid"||i==="Invalid")return Promise.resolve(i);this.emit("core.field.validating",t);var n=this.elements[t];if(n.length===0)return this.emit("core.field.valid",t),Promise.resolve("Valid");var s=n[0].getAttribute("type");return s==="radio"||s==="checkbox"||n.length===1?this.validateElement(t,n[0]):Promise.all(n.map(function(a){return e.validateElement(t,a)})).then(function(a){switch(!0){case a.indexOf("Invalid")!==-1:return e.emit("core.field.invalid",t),e.results.set(t,"Invalid"),Promise.resolve("Invalid");case a.indexOf("NotValidated")!==-1:return e.emit("core.field.notvalidated",t),e.results.delete(t),Promise.resolve("NotValidated");default:return e.emit("core.field.valid",t),e.results.set(t,"Valid"),Promise.resolve("Valid")}})},r.prototype.validateElement=function(t,e){var i=this;this.results.delete(t);var n=this.elements[t],s=this.filter.execute("element-ignored",!1,[t,e,n]);if(s)return this.emit("core.element.ignored",{element:e,elements:n,field:t}),Promise.resolve("Ignored");var a=this.fields[t].validators;this.emit("core.element.validating",{element:e,elements:n,field:t});var o=Object.keys(a).map(function(u){return function(){return i.executeValidator(t,e,u,a[u])}});return this.waterfall(o).then(function(u){var l=u.indexOf("Invalid")===-1;i.emit("core.element.validated",{element:e,elements:n,field:t,valid:l});var h=e.getAttribute("type");return(h==="radio"||h==="checkbox"||n.length===1)&&i.emit(l?"core.field.valid":"core.field.invalid",t),Promise.resolve(l?"Valid":"Invalid")}).catch(function(u){return i.emit("core.element.notvalidated",{element:e,elements:n,field:t}),Promise.resolve(u)})},r.prototype.executeValidator=function(t,e,i,n){var s=this,a=this.elements[t],o=this.filter.execute("validator-name",i,[i,t]);if(n.message=this.filter.execute("validator-message",n.message,[this.locale,t,o]),!this.validators[o]||n.enabled===!1)return this.emit("core.validator.validated",{element:e,elements:a,field:t,result:this.normalizeResult(t,o,{valid:!0}),validator:o}),Promise.resolve("Valid");var u=this.validators[o],l=this.getElementValue(t,e,o),h=this.filter.execute("field-should-validate",!0,[t,e,l,i]);if(!h)return this.emit("core.validator.notvalidated",{element:e,elements:a,field:t,validator:i}),Promise.resolve("NotValidated");this.emit("core.validator.validating",{element:e,elements:a,field:t,validator:i});var c=u().validate({element:e,elements:a,field:t,l10n:this.localization,options:n,value:l}),d=typeof c.then=="function";if(d)return c.then(function(W){var p=s.normalizeResult(t,i,W);return s.emit("core.validator.validated",{element:e,elements:a,field:t,result:p,validator:i}),p.valid?"Valid":"Invalid"});var m=this.normalizeResult(t,i,c);return this.emit("core.validator.validated",{element:e,elements:a,field:t,result:m,validator:i}),Promise.resolve(m.valid?"Valid":"Invalid")},r.prototype.getElementValue=function(t,e,i){var n=k(this.form,t,e,this.elements[t]);return this.filter.execute("field-value",n,[n,t,e,i])},r.prototype.getElements=function(t){return this.elements[t]},r.prototype.getFields=function(){return this.fields},r.prototype.getFormElement=function(){return this.form},r.prototype.getLocale=function(){return this.locale},r.prototype.getPlugin=function(t){return this.plugins[t]},r.prototype.updateFieldStatus=function(t,e,i){var n=this,s=this.elements[t],a=s[0].getAttribute("type"),o=a==="radio"||a==="checkbox"?[s[0]]:s;if(o.forEach(function(u){return n.updateElementStatus(t,u,e,i)}),i)e==="Invalid"&&(this.emit("core.field.invalid",t),this.results.set(t,"Invalid"));else switch(e){case"NotValidated":this.emit("core.field.notvalidated",t),this.results.delete(t);break;case"Validating":this.emit("core.field.validating",t),this.results.delete(t);break;case"Valid":this.emit("core.field.valid",t),this.results.set(t,"Valid");break;case"Invalid":this.emit("core.field.invalid",t),this.results.set(t,"Invalid");break}return this},r.prototype.updateElementStatus=function(t,e,i,n){var s=this,a=this.elements[t],o=this.fields[t].validators,u=n?[n]:Object.keys(o);switch(i){case"NotValidated":u.forEach(function(l){return s.emit("core.validator.notvalidated",{element:e,elements:a,field:t,validator:l})}),this.emit("core.element.notvalidated",{element:e,elements:a,field:t});break;case"Validating":u.forEach(function(l){return s.emit("core.validator.validating",{element:e,elements:a,field:t,validator:l})}),this.emit("core.element.validating",{element:e,elements:a,field:t});break;case"Valid":u.forEach(function(l){return s.emit("core.validator.validated",{element:e,elements:a,field:t,result:{message:o[l].message,valid:!0},validator:l})}),this.emit("core.element.validated",{element:e,elements:a,field:t,valid:!0});break;case"Invalid":u.forEach(function(l){return s.emit("core.validator.validated",{element:e,elements:a,field:t,result:{message:o[l].message,valid:!1},validator:l})}),this.emit("core.element.validated",{element:e,elements:a,field:t,valid:!1});break}return this},r.prototype.resetForm=function(t){var e=this;return Object.keys(this.fields).forEach(function(i){return e.resetField(i,t)}),this.emit("core.form.reset",{formValidation:this,reset:t}),this},r.prototype.resetField=function(t,e){if(e){var i=this.elements[t],n=i[0].getAttribute("type");i.forEach(function(s){n==="radio"||n==="checkbox"?(s.removeAttribute("selected"),s.removeAttribute("checked"),s.checked=!1):(s.setAttribute("value",""),(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&(s.value=""))})}return this.updateFieldStatus(t,"NotValidated"),this.emit("core.field.reset",{field:t,reset:e}),this},r.prototype.revalidateField=function(t){return this.fields[t]?(this.updateFieldStatus(t,"NotValidated"),this.validateField(t)):Promise.resolve("Ignored")},r.prototype.disableValidator=function(t,e){if(!this.fields[t])return this;var i=this.elements[t];return this.toggleValidator(!1,t,e),this.emit("core.validator.disabled",{elements:i,field:t,formValidation:this,validator:e}),this},r.prototype.enableValidator=function(t,e){if(!this.fields[t])return this;var i=this.elements[t];return this.toggleValidator(!0,t,e),this.emit("core.validator.enabled",{elements:i,field:t,formValidation:this,validator:e}),this},r.prototype.updateValidatorOption=function(t,e,i,n){return this.fields[t]&&this.fields[t].validators&&this.fields[t].validators[e]&&(this.fields[t].validators[e][i]=n),this},r.prototype.setFieldOptions=function(t,e){return this.fields[t]=e,this},r.prototype.destroy=function(){var t=this;return Object.keys(this.plugins).forEach(function(e){return t.plugins[e].uninstall()}),this.ee.clear(),this.filter.clear(),this.results.clear(),this.plugins={},this},r.prototype.setLocale=function(t,e){return this.locale=t,this.localization=e,this},r.prototype.waterfall=function(t){return t.reduce(function(e,i){return e.then(function(n){return i().then(function(s){return n.push(s),n})})},Promise.resolve([]))},r.prototype.queryElements=function(t){var e=this.fields[t].selector?this.fields[t].selector.charAt(0)==="#"?'[id="'.concat(this.fields[t].selector.substring(1),'"]'):this.fields[t].selector:'[name="'.concat(t.replace(/"/g,'\\"'),'"]');return[].slice.call(this.form.querySelectorAll(e))},r.prototype.normalizeResult=function(t,e,i){var n=this.fields[t].validators[e];return Object.assign({},i,{message:i.message||(n?n.message:"")||(this.localization&&this.localization[e]&&this.localization[e].default?this.localization[e].default:"")||"The field ".concat(t," is not valid")})},r.prototype.toggleValidator=function(t,e,i){var n=this,s=this.fields[e].validators;return i&&s&&s[i]?this.fields[e].validators[i].enabled=t:i||Object.keys(s).forEach(function(a){return n.fields[e].validators[a].enabled=t}),this.updateFieldStatus(e,"NotValidated",i)},r}();function N(r,t){var e=Object.assign({},{fields:{},locale:"en_US",plugins:{},init:function(n){}},t),i=new L(r,e.fields);return i.setLocale(e.locale,e.localization),Object.keys(e.plugins).forEach(function(n){return i.registerPlugin(n,e.plugins[n])}),e.init(i),Object.keys(e.fields).forEach(function(n){return i.addField(n,e.fields[n])}),i}var j=function(){function r(t){this.opts=t,this.isEnabled=!0}return r.prototype.setCore=function(t){return this.core=t,this},r.prototype.enable=function(){return this.isEnabled=!0,this.onEnabled(),this},r.prototype.disable=function(){return this.isEnabled=!1,this.onDisabled(),this},r.prototype.isPluginEnabled=function(){return this.isEnabled},r.prototype.onEnabled=function(){},r.prototype.onDisabled=function(){},r.prototype.install=function(){},r.prototype.uninstall=function(){},r}();function C(r,t){if(typeof r=="function")return r.apply(this,t);if(typeof r=="string"){var e=r;e.substring(e.length-2)==="()"&&(e=e.substring(0,e.length-2));for(var i=e.split("."),n=i.pop(),s=window,a=0,o=i;a<o.length;a++){var u=o[a];s=s[u]}return typeof s[n]>"u"?null:s[n].apply(this,t)}}var S=function(r,t){t.split(" ").forEach(function(e){r.classList?r.classList.add(e):" ".concat(r.className," ").indexOf(" ".concat(e," "))&&(r.className+=" ".concat(e))})},R=function(r,t){t.split(" ").forEach(function(e){r.classList?r.classList.remove(e):r.className=r.className.replace(e,"")})},T=function(r,t){var e=[],i=[];Object.keys(t).forEach(function(n){n&&(t[n]?e.push(n):i.push(n))}),i.forEach(function(n){return R(r,n)}),e.forEach(function(n){return S(r,n)})},M=function(r,t){var e=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;if(e)return e.call(r,t);var i=[].slice.call(r.parentElement.querySelectorAll(t));return i.indexOf(r)>=0},q=function(r,t){for(var e=r;e&&!M(e,t);)e=e.parentElement;return e},U=function(r){return Array(r).fill("").map(function(t){return Math.random().toString(36).charAt(2)}).join("")},D=function(r,t){var e=function(i){return Object.keys(i).map(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(i[n]))}).join("&")};return new Promise(function(i,n){var s=Object.assign({},{crossDomain:!1,headers:{},method:"GET",params:{}},t),a=Object.keys(s.params).map(function(d){return"".concat(encodeURIComponent(d),"=").concat(encodeURIComponent(s.params[d]))}).join("&"),o=r.indexOf("?")>-1,u=s.method==="GET"?"".concat(r).concat(o?"&":"?").concat(a):r;if(s.crossDomain){var l=document.createElement("script"),h="___FormValidationFetch_".concat(U(12),"___");window[h]=function(d){delete window[h],i(d)},l.src="".concat(u).concat(o?"&":"?","callback=").concat(h),l.async=!0,l.addEventListener("load",function(){l.parentNode.removeChild(l)}),l.addEventListener("error",function(){return n}),document.head.appendChild(l)}else{var c=new XMLHttpRequest;c.open(s.method,u),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.method==="POST"&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Object.keys(s.headers).forEach(function(d){return c.setRequestHeader(d,s.headers[d])}),c.addEventListener("load",function(){i(JSON.parse(this.responseText))}),c.addEventListener("error",function(){return n}),c.send(e(s.params))}})},H=function(r,t){var e=Array.isArray(t)?t:[t],i=r;return e.forEach(function(n){i=i.replace("%s",n)}),i},X=function(r,t){return r.classList?r.classList.contains(t):new RegExp("(^| )".concat(t,"( |$)"),"gi").test(r.className)},G=function(r,t,e,i){if(isNaN(r)||isNaN(t)||isNaN(e)||r<1e3||r>9999||t<=0||t>12)return!1;var n=[31,r%400===0||r%100!==0&&r%4===0?29:28,31,30,31,30,31,31,30,31,30,31];if(e<=0||e>n[t-1])return!1;if(i===!0){var s=new Date,a=s.getFullYear(),o=s.getMonth(),u=s.getDate();return r<a||r===a&&t-1<o||r===a&&t-1===o&&e<u}return!0},Q=function(r){return r?Object.entries(r).reduce(function(t,e){var i=e[0],n=e[1];return n===void 0||(t[i]=n),t},{}):{}},J={call:C,classSet:T,closest:q,fetch:D,format:H,hasClass:X,isValidDate:G,removeUndefined:Q};return f.Plugin=j,f.algorithms=w,f.formValidation=N,f.utils=J,f}var y;function B(){return y||(y=1,v.exports=$()),v.exports}export{B as r};
