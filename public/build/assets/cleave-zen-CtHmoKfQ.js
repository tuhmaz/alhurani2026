var T,R,s,K=function(e){return e.replace(/[^\d]/g,"")},re=function(e){return e.reduce(function(r,t){return r+t},0)},te=function(e,r){return e.slice(0,r)},G=function(e){var r=e.value;return e.delimiters.forEach(function(t){t.split("").forEach(function(l){r=r.replace(new RegExp(l.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g"),"")})}),r},q=function(e){var r=e.blocks,t=e.delimiter,l=t===void 0?"":t,v=e.delimiters,a=v===void 0?[]:v,f=e.delimiterLazyShow,x=f!==void 0&&f,I="",c=e.value,p="";return r.forEach(function(A,C){if(c.length>0){var i,h=c.slice(0,A),M=c.slice(A);p=a.length>0?(i=a[x?C-1:C])!=null?i:p:l,x?(C>0&&(I+=p),I+=h):(I+=h,h.length===A&&C<r.length-1&&(I+=p)),c=M}}),I},se=function(e){var r=e.delimiter,t=e.delimiters,l=e.prefix,v=l===void 0?"":l,a=e.input;if(a.CLEAVE_ZEN_cursor_tracker!==void 0)return function(){a.removeEventListener("input",a.CLEAVE_ZEN_cursor_tracker),a.CLEAVE_ZEN_cursor_tracker=void 0};var f=[r===void 0?"":r].concat(t===void 0?[]:t);return a.CLEAVE_ZEN_cursor_tracker=function(x){var I,c=x.target;(x.inputType==="deleteContentBackward"||c.value.length!==c.selectionEnd)&&(c.CLEAVE_ZEN_cleanCursorIndex=function(p){for(var A=p.value,C=p.dirtyCursorIndex,i=p.delimiters,h=C,M=0;M<C;M++)i.includes(A[M])&&h--;return h}({value:c.value,dirtyCursorIndex:(I=c.selectionEnd)!=null?I:0,delimiters:f}),setTimeout(function(){var p;if(G({value:c.value,delimiters:f})!==v){var A=function(C){for(var i=C.value,h=C.delimiters,M=C.cleanCursorIndex,n=0;n<i.length&&(h.includes(i[n])&&M++,n!==M-1);n++);return M}({value:c.value,cleanCursorIndex:(p=c.CLEAVE_ZEN_cleanCursorIndex)!=null?p:0,delimiters:f});c.setSelectionRange(A,A)}},0))},a.addEventListener("input",a.CLEAVE_ZEN_cursor_tracker),function(){a.removeEventListener("input",a.CLEAVE_ZEN_cursor_tracker),a.CLEAVE_ZEN_cursor_tracker=void 0}},ce=function(e,r){var t=r.blocks,l=r.delimiter,v=l===void 0?"":l,a=r.delimiters,f=a===void 0?[]:a,x=r.delimiterLazyShow,I=x!==void 0&&x,c=r.prefix,p=c===void 0?"":c,A=r.numericOnly,C=A!==void 0&&A,i=r.uppercase,h=i!==void 0&&i,M=r.lowercase,n=M!==void 0&&M;return v.length>0&&f.push(v),e=function(E){var u=E.value,g=E.prefix,m=E.tailPrefix,w=g.length;return w===0?u:u===g&&u!==""?"":u.slice(0,w)===g||m?u.slice(-w)!==g&&m?"":m?u.slice(0,-w):u.slice(w):""}({value:e=G({value:e,delimiters:f}),prefix:p,tailPrefix:!1}),e=C?K(e):e,e=h?e.toUpperCase():e,e=n?e.toLowerCase():e,p.length>0&&(e=p+e),q({value:e,blocks:t,delimiter:v,delimiters:f,delimiterLazyShow:I})};(function(e){e.UATP="uatp",e.AMEX="amex",e.DINERS="diners",e.DISCOVER="discover",e.MASTERCARD="mastercard",e.DANKORT="dankort",e.INSTAPAYMENT="instapayment",e.JCB15="jcb15",e.JCB="jcb",e.MAESTRO="maestro",e.VISA="visa",e.MIR="mir",e.UNIONPAY="unionpay",e.GENERAL="general"})(s||(s={}));var $,Q=((T={})[s.UATP]=[4,5,6],T[s.AMEX]=[4,6,5],T[s.DINERS]=[4,6,4],T[s.DISCOVER]=[4,4,4,4],T[s.MASTERCARD]=[4,4,4,4],T[s.DANKORT]=[4,4,4,4],T[s.INSTAPAYMENT]=[4,4,4,4],T[s.JCB15]=[4,6,5],T[s.JCB]=[4,4,4,4],T[s.MAESTRO]=[4,4,4,4],T[s.VISA]=[4,4,4,4],T[s.MIR]=[4,4,4,4],T[s.UNIONPAY]=[4,4,4,4],T[s.GENERAL]=[4,4,4,4],T),ne=((R={})[s.UATP]=/^(?!1800)1\d{0,14}/,R[s.AMEX]=/^3[47]\d{0,13}/,R[s.DISCOVER]=/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,R[s.DINERS]=/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,R[s.MASTERCARD]=/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,R[s.DANKORT]=/^(5019|4175|4571)\d{0,12}/,R[s.INSTAPAYMENT]=/^63[7-9]\d{0,13}/,R[s.JCB15]=/^(?:2131|1800)\d{0,11}/,R[s.JCB]=/^(?:35\d{0,2})\d{0,12}/,R[s.MAESTRO]=/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,R[s.MIR]=/^220[0-4]\d{0,12}/,R[s.VISA]=/^4\d{0,15}/,R[s.UNIONPAY]=/^(62|81)\d{0,14}/,R),ie=function(e){var r=e.reduce(function(t,l){return t+l},0);return e.concat(19-r)},de=function(e){for(var r=e.value,t=e.strictMode,l=0,v=Object.keys(ne);l<v.length;l++){var a=v[l];if(ne[a].test(r)){var f=Q[a];return{type:a,blocks:t!=null&&t?ie(f):f}}}return{type:s.GENERAL,blocks:t!=null&&t?ie(Q.general):Q.general}},me=function(e,r){var t=r??{},l=t.delimiter,v=l===void 0?" ":l,a=t.delimiterLazyShow,f=a!==void 0&&a,x=t.strictMode,I=x!==void 0&&x;e=K(e),e=G({value:e,delimiters:[v]});var c=de({value:e,strictMode:I}).blocks,p=re(c);return e=te(e,p),q({value:e,blocks:c,delimiter:v,delimiterLazyShow:f})},ve=function(e,r){return e=K(e),e=G({value:e,delimiters:[r??" "]}),de({value:e}).type};(function(e){e.THOUSAND="thousand",e.LAKH="lakh",e.WAN="wan",e.NONE="none"})($||($={}));var ge=$.THOUSAND,fe=function(e,r){var t=r??{},l=t.delimiter,v=t.numeralThousandsGroupStyle,a=t.numeralIntegerScale,f=t.numeralDecimalMark,x=t.numeralDecimalScale,I=t.stripLeadingZeroes,c=t.numeralPositiveOnly,p=t.tailPrefix,A=t.signBeforePrefix,C=t.prefix;return function(i){var h,M,n,E=i.delimiter,u=i.numeralDecimalMark,g=i.numeralDecimalScale,m=i.stripLeadingZeroes,w=i.numeralPositiveOnly,y=i.numeralIntegerScale,Y=i.numeralThousandsGroupStyle,k=i.signBeforePrefix,V=i.tailPrefix,o=i.prefix,N="",L=i.value.replace(/[A-Za-z]/g,"").replace(u,"M").replace(/[^\dM-]/g,"").replace(/^-/,"N").replace(/-/g,"").replace("N",w!=null&&w?"":"-").replace("M",u);m&&(L=L.replace(/^(-)?0+(?=\d)/,"$1"));var d=L.slice(0,1)==="-"?"-":"";switch(M=k?d+o:o+d,n=L,L.includes(u)&&(n=(h=L.split(u))[0],N=u+h[1].slice(0,g)),d==="-"&&(n=n.slice(1)),y>0&&(n=n.slice(0,y)),Y){case $.LAKH:n=n.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+E);break;case $.WAN:n=n.replace(/(\d)(?=(\d{4})+$)/g,"$1"+E);break;case $.THOUSAND:n=n.replace(/(\d)(?=(\d{3})+$)/g,"$1"+E)}return V?d+n+(g>0?N:"")+o:M+n+(g>0?N:"")}({value:e,delimiter:l===void 0?",":l,numeralIntegerScale:a===void 0?0:a,numeralDecimalMark:f===void 0?".":f,numeralDecimalScale:x===void 0?2:x,stripLeadingZeroes:I===void 0||I,numeralPositiveOnly:c!==void 0&&c,numeralThousandsGroupStyle:v===void 0?ge:v,tailPrefix:p!==void 0&&p,signBeforePrefix:A!==void 0&&A,prefix:C===void 0?"":C})},Ie=["d","m","Y"],ae=function(e,r){return r?(e<10?"000":e<100?"00":e<1e3?"0":"")+e:(e<10?"0":"")+e},le=function(e){return(e<10?"0":"")+e},ue=function(e,r,t){var l;return e=Math.min(e,31),t=(l=t)!=null?l:0,((r=Math.min(r,12))<7&&r%2==0||r>8&&r%2==1)&&(e=Math.min(e,r===2?function(v){return v%4==0&&v%100!=0||v%400==0}(t)?29:28:30)),[e,r,t]},pe=function(e,r){var t=r??{},l=t.delimiterLazyShow,v=l!==void 0&&l,a=t.delimiter,f=a===void 0?"/":a,x=t.datePattern,I=x===void 0?Ie:x,c=t.dateMax,p=c===void 0?"":c,A=t.dateMin,C=A===void 0?"":A;e=K(e);var i=function(n){var E=[];return n.forEach(function(u){E.push(u==="Y"?4:2)}),E}(I),h=function(n){var E=n.dateMax,u=n.dateMin.split("-").reverse().map(function(m){return parseInt(m,10)});u.length===2&&u.unshift(0);var g=E.split("-").reverse().map(function(m){return parseInt(m,10)});return g.length===2&&g.unshift(0),{min:u,max:g}}({dateMax:p,dateMin:C});e=function(n){var E=n.value,u=E===void 0?"":E,g=n.blocks,m=n.datePattern,w=n.min,y=n.max,Y="";return(g===void 0?[]:g).forEach(function(k,V){if(u.length>0){var o=u.slice(0,k),N=o.slice(0,1),L=u.slice(k);switch(m[V]){case"d":o==="00"?o="01":parseInt(N,10)>3?o="0"+N:parseInt(o,10)>31&&(o="31");break;case"m":o==="00"?o="01":parseInt(N,10)>1?o="0"+N:parseInt(o,10)>12&&(o="12")}Y+=o,u=L}}),function(k){var V,o,N,L=k.value,d=L===void 0?"":L,S=k.datePattern,Z=k.min,H=k.max,b=[],j=0,X=0,W=0,F=0,_=0,P=0,J=!1;return d.length===4&&S[0].toLowerCase()!=="y"&&S[1].toLowerCase()!=="y"&&(_=2-(F=S[0]==="d"?0:2),V=parseInt(d.slice(F,F+2),10),o=parseInt(d.slice(_,_+2),10),b=ue(V,o,0)),d.length===8&&(S.forEach(function(O,z){switch(O){case"d":j=z;break;case"m":X=z;break;default:W=z}}),P=2*W,F=j<=W?2*j:2*j+2,_=X<=W?2*X:2*X+2,V=parseInt(d.slice(F,F+2),10),o=parseInt(d.slice(_,_+2),10),N=parseInt(d.slice(P,P+4),10),J=d.slice(P,P+4).length===4,b=ue(V,o,N)),d.length!==4||S[0]!=="y"&&S[1]!=="y"||(P=2-(_=S[0]==="m"?0:2),o=parseInt(d.slice(_,_+2),10),N=parseInt(d.slice(P,P+2),10),J=d.slice(P,P+2).length===2,b=[0,o,N]),d.length!==6||S[0]!=="Y"&&S[1]!=="Y"||(P=2-.5*(_=S[0]==="m"?0:4),o=parseInt(d.slice(_,_+2),10),N=parseInt(d.slice(P,P+4),10),J=d.slice(P,P+4).length===4,b=[0,o,N]),(b=function(O){var z=O.date,D=z===void 0?[]:z,B=O.min,U=O.max;return D.length===0||B.length<3&&U.length<3||O.datePattern.filter(function(Ee){return Ee.toLowerCase()==="y"}).length>0&&D[2]===0?D:U.length>0&&(U[2]<D[2]||U[2]===D[2]&&(U[1]<D[1]||U[1]===D[1]&&U[0]<D[0]))?U:B.length>0&&(B[2]>D[2]||B[2]===D[2]&&(B[1]>D[1]||B[1]===D[1]&&B[0]>D[0]))?B:D}({date:b,datePattern:S,min:Z,max:H})).length===0?d:S.reduce(function(O,z){switch(z){case"d":return O+(b[0]===0?"":le(b[0]));case"m":return O+(b[1]===0?"":le(b[1]));case"y":return O+(J?ae(b[2],!1):"");case"Y":return O+(J?ae(b[2],!0):"")}return O},"")}({value:Y,datePattern:m,min:w,max:y})}({value:e,blocks:i,datePattern:I,min:h.min,max:h.max}),e=G({value:e,delimiters:[f]});var M=re(i);return e=te(e,M),q({value:e,blocks:i,delimiter:f,delimiterLazyShow:v})},Ae=["h","m","s"],ee=function(e){return(e<10?"0":"")+e},oe=function(e,r,t){return t=Math.min(t,60),r=Math.min(r,60),[e=Math.min(e,60),r,t]},he=function(e,r){var t=r??{},l=t.delimiterLazyShow,v=l!==void 0&&l,a=t.delimiter,f=a===void 0?":":a,x=t.timePattern,I=x===void 0?Ae:x,c=t.timeFormat,p=c===void 0?"24":c;e=K(e);var A=function(i){var h=[];return i.forEach(function(){h.push(2)}),h}(I);e=function(i){var h=i.value,M=i.timePattern,n="",E=i.timeFormat==="12"?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60};return i.blocks.forEach(function(u,g){if(h.length>0){var m=h.slice(0,u),w=m.slice(0,1),y=h.slice(u);switch(M[g]){case"h":parseInt(w,10)>E.maxHourFirstDigit?m="0"+w:parseInt(m,10)>E.maxHours&&(m=E.maxHours+"");break;case"m":case"s":parseInt(w,10)>E.maxMinutesFirstDigit?m="0"+w:parseInt(m,10)>E.maxMinutes&&(m=E.maxMinutes+"")}n+=m,h=y}}),function(u){var g,m,w,y=u.value,Y=u.timePattern,k=[],V=0,o=0,N=0,L=0,d=0,S=0;return y.length===6&&(Y.forEach(function(Z,H){switch(Z){case"s":V=2*H;break;case"m":o=2*H;break;case"h":N=2*H}}),S=N,d=o,L=V,g=parseInt(y.slice(L,L+2),10),m=parseInt(y.slice(d,d+2),10),w=parseInt(y.slice(S,S+2),10),k=oe(w,m,g)),y.length!==4||Y.includes("s")||(Y.forEach(function(Z,H){switch(Z){case"m":o=2*H;break;case"h":N=2*H}}),S=N,d=o,g=0,m=parseInt(y.slice(d,d+2),10),w=parseInt(y.slice(S,S+2),10),k=oe(w,m,g)),k.length===0?y:Y.reduce(function(Z,H){switch(H){case"s":return Z+ee(k[2]);case"m":return Z+ee(k[1]);case"h":return Z+ee(k[0])}return Z},"")}({value:n,timePattern:M})}({value:e,blocks:A,timePattern:I,timeFormat:p}),e=G({value:e,delimiters:[f]});var C=re(A);return e=te(e,C),q({value:e,blocks:A,delimiter:f,delimiterLazyShow:v})};window.registerCursorTracker=se;window.formatCreditCard=me;window.getCreditCardType=ve;window.formatDate=pe;window.formatTime=he;window.formatNumeral=fe;window.formatGeneral=ce;window.CleaveZen={formatCreditCard:me,getCreditCardType:ve,formatDate:pe,formatTime:he,formatNumeral:fe,formatGeneral:ce,registerCursorTracker:se};
