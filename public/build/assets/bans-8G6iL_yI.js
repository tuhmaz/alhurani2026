class p{constructor(){this.initialize()}initializeBulkActions(){const n=document.querySelectorAll('input[type="checkbox"]'),t=document.getElementById("selectAll"),c=document.getElementById("bulkActionsBtn"),i=document.getElementById("bulkDeleteBtn"),o=document.getElementById("bulkUnbanBtn"),a=document.getElementById("bulkActionsModal"),d=document.getElementById("bulkActionText"),l=document.getElementById("bulkActionsForm"),m=document.getElementById("selectedIps");if(!c)return;const u=()=>{const e=document.querySelectorAll('input[type="checkbox"]:checked:not(#selectAll)');c.disabled=e.length===0,i.disabled=e.length===0,o.disabled=e.length===0},r=()=>{const e=document.querySelectorAll('td input[type="checkbox"]:checked');let s="";e.forEach(h=>{const b=h.closest("tr").querySelector(".ban-ip").textContent.trim();s+=`<div class="mb-1"><i class='bx bx-check-circle text-success me-1'></i> ${b}</div>`}),m.innerHTML=s||`<div class="text-muted">${window.trans("No IPs selected")}</div>`};t&&t.addEventListener("change",function(){n.forEach(e=>{e!==t&&(e.checked=t.checked)}),u()}),i&&i.addEventListener("click",function(e){e.preventDefault(),d.textContent=window.trans("delete"),l.action='{{ route("monitoring.api.bans.bulk") }}',l.querySelector('input[name="_method"]').value="DELETE",r(),new bootstrap.Modal(a).show()}),o&&o.addEventListener("click",function(e){e.preventDefault(),d.textContent=window.trans("unban"),l.action='{{ route("monitoring.api.bans.bulk.unban") }}',l.querySelector('input[name="_method"]').value="POST",r(),new bootstrap.Modal(a).show()}),n.forEach(e=>{e.addEventListener("change",u)})}initializeSearch(){const n=document.getElementById("searchInput");n&&n.addEventListener("keyup",function(){const t=this.value.toLowerCase();document.querySelectorAll("tbody tr").forEach(i=>{const o=i.textContent.toLowerCase();i.style.display=o.includes(t)?"":"none"})})}initializeIPValidation(){const n=document.getElementById("ip");n&&n.addEventListener("input",function(){const t=/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}(?:\/[0-9]{1,2})?$/;this.value&&!t.test(this.value)?this.setCustomValidity("Please enter a valid IP address (e.g., 192.168.1.1 or 192.168.1.0/24)"):this.setCustomValidity("")})}initializeTooltips(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(t){return new bootstrap.Tooltip(t)})}initializeStatusFilter(){const n=document.getElementById("statusFilter");n&&n.addEventListener("change",function(){const t=new URL(window.location.href);this.value?t.searchParams.set("status",this.value):t.searchParams.delete("status"),window.location.href=t.toString()})}initialize(){this.initializeBulkActions(),this.initializeSearch(),this.initializeIPValidation(),this.initializeTooltips(),this.initializeStatusFilter()}}$(document).ready(function(){window.bansManager=new p});
