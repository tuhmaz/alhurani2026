$(function(){$(".resolve-alert").on("click",function(){$("#is_resolved").val(1),$("#resolveAlertModal").modal("show")}),$(".unresolve-alert").on("click",function(){$("#is_resolved").val(0),$("#resolution_notes").val(""),$("#resolveAlertModal").modal("show")}),$("#submitResolveAlert").on("click",function(){var o=$("#alert_id").val(),s=$("#is_resolved").val(),a=$("#resolution_notes").val();$.ajax({url:"/dashboard/security/alerts/"+o,type:"PUT",data:{_token:$('meta[name="csrf-token"]').attr("content"),is_resolved:s,resolution_notes:a},success:function(e){$("#resolveAlertModal").modal("hide"),toastr.success(e.message),setTimeout(function(){window.location.reload()},2e3)},error:function(e){toastr.error(e.responseJSON.message||"حدث خطأ أثناء معالجة الطلب")}})}),$(".block-ip").on("click",function(){$("#blockIpModal").modal("show")}),$("#submitBlockIp").on("click",function(){var o=$("#ip_address").val(),s=$("#block_reason").val(),a=$("#block_duration").val();$.ajax({url:"/dashboard/security/block-ip",type:"POST",data:{_token:$('meta[name="csrf-token"]').attr("content"),ip_address:o,reason:s,duration:a},success:function(e){$("#blockIpModal").modal("hide"),toastr.success(e.message),setTimeout(function(){window.location.reload()},2e3)},error:function(e){toastr.error(e.responseJSON.message||"حدث خطأ أثناء معالجة الطلب")}})}),$(".mark-issue-resolved").on("click",function(){var o=$(this).data("issue-id");$("#alert_id").val(),confirm("هل أنت متأكد من تحديد هذه المشكلة كمحلولة؟")&&(toastr.success("تم تحديد المشكلة #"+o+" كمحلولة"),$(this).closest(".issue-item").find(".badge").removeClass("bg-danger bg-warning bg-info").addClass("bg-success").text("محلول"),$(this).remove())})});
